# 智能画布 - 思源笔记插件

将类似 Cursor 和 GPT Canvas 的交互式 AI 助手体验带入您的思源笔记工作空间。与 AI 对话，提供笔记上下文，让 AI 帮助您更智能地编写和处理文档。

## 特性

* **侧边栏聊天界面：**

  *  在思源笔记中提供一个专门的侧边栏，用于和 AI 进行交互。
* **上下文感知：**

  * 识别当前活动文档的内容和结构
  * 始终将当前活动文档作为上下文。
* **上下文引用：**

  * **块选区引用：** 在编辑器中选中块内文本，点击聊天面板的"引用选区"按钮，将包含选中文本的块添加为上下文引用（例如标签"选区 1"）。此引用仅对当前发送的消息有效。
  * **文档引用：** 点击引用栏上的"@"按钮，将当前打开的文档添加为持久化的上下文引用。
  * **引用栏：** 清晰地显示当前激活的上下文引用标签，并允许移除它们。
* **AI 交互：**

  * 与可配置的 AI 模型（如 DeepSeek、GPT 等）进行对话。
  * AI 会使用您提供的文档和块引用作为上下文来生成回复。
  * 根据 AI 的建议执行插入、删除、修改笔记内容等命令。
* **对话管理：**

  * 自动保存对话。
  * 从历史记录列表中加载之前的对话。
  * 可以删除不需要的对话记录。

## 如何使用

### 安装

1. 从最新的 [GitHub Release](https://github.com/B3000Kcn/siyuan-plugin-canvas/releases) 下载 `package.zip` 文件。
2. 在思源笔记中，打开 `设置` -> `集市` -> `手动安装插件`。
3. 选择下载的 `package.zip` 文件。
4. 在 `已下载` 标签页中启用"智能画布"插件。

### 设置

1. 启用插件后，应该会出现一个新的图标（或者通过插件设置/面板访问）。
2. 打开插件面板。
3. 进入插件设置（通常在思源主菜单 `设置` -> `插件` 下找到）。
4. 输入您的 AI 服务 API Key，选择您想使用的 AI 模型，并保存设置。

## ⚠️ 注意事项

当前版本暂不能稳定进行多块选区的编辑操作。

某选区里有多个块时，AI 可以正确识别内容，但无法做到稳定的编辑操作。

请尽量避免对多块选区发出编辑命令。

## GHANGE LOG

* `0.2.0` 更加稳定和可用的版本，修复 BUG，提升用户体验

  * 修复当前文档有标题时只能识别标题的问题，能能识别当前文档完整内容、精确结构和顺序
  * 修复加载历史对话后插件无法发送消息、引用选区的问题
  * 一定程度优化多块选区编辑操作，但仍不稳定，请尽量避免多块选区操作
  * 优化界面显示，适配暗色模式
  * 当前活动聊天内容持久化
* `0.1.1` 首次上传

## 许可证

本插件使用 Apache License 2.0 许可证。

## 作者

B3000Kcn